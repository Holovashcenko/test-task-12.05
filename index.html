<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Brains</title>
</head>

<body>
    <script>
        /*
        * avaible - имеющиеся значения
        * allowed - доступные значения
        * preffered - желанные значения
        * attempt - возвращает значения удовлетворяющие запрос 
        */
        let attempt = (avaible, allowed, preffered) => avaible.filter(i => allowed.includes(i) && preffered.includes(i) || allowed.includes(i))

        console.log('1: ' + attempt([240, 360, 720], [360, 720], [1080])) // [360]
        console.log('2: ' + attempt([240, 720], [360, 720], [1080])) // [720]
        console.log('3: ' + attempt([240], [360, 720], [1080])) // []
        console.log('4: ' + attempt([240, 360, 720], [240, 360, 720, 1080], [240, 360])) // [240, 360]
        console.log('5: ' + attempt([240, 720], [240, 360, 720, 1080], [240, 360])) // [240,720]
        console.log('6: ' + attempt([240, 720], [240, 360, 1080], [240, 360])) // [240]
        console.log('7: ' + attempt([720], [240, 360, 1080], [240, 360])) // []
        console.log('8: ' + attempt([240, 360], [240, 360], [720, 1080])) // [360]
        console.log('9: ' + attempt([240, 360, 720], [360, 'any'], [360, 720])) // [360, 720]
        console.log('10: ' + attempt([240, 360, 720], [240, 360, 720], ['any', 720])) // [240, 360, 720]
        console.log('11: ' + attempt([240, 360, 720], [360, 1080], ['any', 720])) // [360]
        console.log('12: ' + attempt([240, 360, 720], [1080], ['any', 720])) // []
    </script>
</body>

</html>